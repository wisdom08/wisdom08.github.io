---
title: TIL_20200730
permalink: /docs/til_20200730
parent: TIL_202007
grand_parent: TIL
has_children: false
nav_order: 21
---

# Facts

- UML이 뭔지 찾아보고, 쿠폰 발행 프로그램 개발을 위해 UML을 그려봤습니다.
- '객체지향의 사실과 오해 책'을 읽고 UML 그릴 때 객체지향을 적용해보려고 했습니다.
- 데메테르 법칙(Tell, Don't Ask)이 뭔지 찾아봤습니다.

# Feelings

- 객체지향 너무 어렵네요. 역할, 책임, 협력이 키워드이고, 메시지가 중요한 건 알겠지만, 이 개념들을 활용해서 UML을 그려보려니까 쉽지 않았습니다. 내일 더 업그레이드를 시켜보겠습니다.

# Finding

## 내가 그린 첫 번째 UML

![](/assets/images/coupon.PNG)

---

## UML: 클래스 다이어그램과 소스코드 매핑

### **UML**

UML이란 Unified Modeling Language의 약자로 1997년 OMG(Object Management Group)에서 표준으로 채택한 통합모델링언어이다. 즉, 모델을 만드는 표준언어이다. 모델이란 것은 어떤 것을 실제로 만들 때 이렇게 만들면 잘 작동할지 미리 검증해 보는 것이며 실제 물건을 만드는 비용보다 비용이 훨씬 적을 경우에 모델을 만들어 설계를 검사한다.

소프트웨어에서의 모델은 건축, 항공 등의 모델과는 좀 다른 면이 있다. 건물을 짓고, 항공기를 만드는 것과 설계를 그리고 만드는 것은 비용의 엄청난 차이가 있다. 하지만 UML 다이어그램을 그리며 모델을 만드는 일은 개발보다 비용이 적긴 하지만 훨씬 적게 드는 것이 아니며 때로는 오히려 개발보다 비용이 더 많이 들 수도 있다. 그래서 UML은 시험해 볼 구체적인 것이 있고, 그것을 코드로 시험해 보는 것보다 UML로 시험해 보는 쪽이 비용이 덜 들 때 주로 사용한다. 이러한 목적으로 UML을 사용하는 유형에는 다음 3가지 정도가 있다.

- 다른 사람들과의 의사소통 또는 설계 논의
- 전체 시스템의 구조 및 클래스의 의존성 파악
- 유지보수를 위한 설계의 back-end 문서

UML을 그리는데 가장 좋은 도구는 종이와 펜이라는 말이 있듯이 습관적으로 만드는 게 아니라 필요에 의해 만드는 것이 가장 좋은 것 같다.

---

## 객체지향의 사실고 오해 정리

### 객체지향 시스템 설계 절차(역할, 책임, 협력)

1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
4. 객체가 책임을 수행하는 중에 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
   - 도움을 요청하기 위해 어떤 메시지가 필요한지 결정한다. 그리고 적합한 객체를 선택한다.
   - 메시지가 수신자의 책임을 결정한다.
5. 해당 객체 또는 역할에게 책임을 할당 함으로써 두 객체가 협력하게 된다.

### 객체지향을 강력하게 만드는 비밀은 책임과 메시지에 숨겨져 있다.

- 훌륭한 객체지향의 세계는 명확하게 정의된 역할과 책임을 지닌 객체들이 상호 협력하는 세계다.
- 적절한 책임이 자율적인 객체를 낳고, 자율적인 객체들이 모여 유연하고 단순한 협력을 낳는다.
- 객체지향 세계는 자율적인 객체들의 공동체이다.
- 객체가 자율적이기 위해서는 객체에게 할당되는 책임의 수준 역시 자율적이어야 한다.
- 자율적인 책임의 특징은 객체가 어떻게(HOW) 해야 하는가가 아니라 무엇(WHAT)을 해야 하는가를 설명한다는 것이다.
- 객체는 메시지에 대한 응답으로 요청을 만족하기 위한 어떤 메서드를 수행할 것이다.
- 협력관계 속에서 다른 객체에게 무엇을 제공해야 하고 다른 객체로부터 무엇을 얻어야 하는 가라는 관점에서 접근할 때만 훌륭한 책임을 수확할 수 있다.
- 객체가 다른 객체에게 제공해야 하는 메시지에 대해 고민하라
- 훌륭한 객체지향 설계는 어떤 객체가 어떤 메시지를 전송할 수 있는가와 어떤 객체가 어떤 메시지를 이해할 수 있는가를 중심으로 객체 사이의 협력 관계를 구성하는 것이다.
  - 개별 객체에 초점을 맞추는 관점과는 매우 다르다
- 객체지향 설계의 중심에는 메시지가 위치한다.
- 객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 해야 한다.
  - 그럴려면 메시지를 중심으로 협력을 설계해야 한다.

### 다형성

- 서로 다른 타입에 속하는 객체들이 동일한 메시지를 수신할 경우 서로 다른 메서드를 이용해 메시지를 처리할 수 있는 메커니즘
- 서로 다른 객체들이 다형성을 만족시킨다는 것은 객체들이 동일한 책임을 공유한다는 것을 의미한다.
- 개별 객체가 아니라 객체들이 주고받는 메시지에 초점을 맞출 때 비로소 그 진가를 발휘하게 된다.

### 메시지를 믿어라. 그러면 자율적인 책임은 저절로 따라올 것이다.

### 메시지가 인터페이스를 결정한다.

- 객체의 인터페이스는 객체가 수신할 수 있는 메시지의 목록으로 구성되며 객체가 어떤 메시지를 수신할 수 있는지가 객체가 제공하는 인터페이스의 모양을 빚는다.
- 객체는 인터페이스를 통해 메시지가 수신됐을 때 증언하거나 증인석에 입장할 책임을 자율적으로 수행한다.
- 결과적으로 객체가 협력에 참여하기 위해 수행하는 메시지가 객체의 공용 인터페이스의 모양을 암시한다.
- 먼저 메시지를 결정하고 이 메시지를 수행할 객체를 나중에 결정하기 때문에 메시지가 수신자의 인터페이스를 결정할 수 밖에 없다.
- 실제로 객체의 공용 인터페이스를 구성하는 것은 객체가 외부로부터 수신할 수 있는 메시지의 목록이다.
- 인터페이스는 객체가 다른 객체와 협력하기 위한 점점

### WHAT/WHO 사이클

- 어떤 행위(WHAT)을 수행할 것인지를 결정한 후에 누가(WHO) 그 행위를 수행할 것인지를 결정해야 한다는 것
  - 어떤 행위가 바로 메시지다.
- 수신 가능한 메시지가 모여 객체의 인터페이스를 구성한다.
- 객체가 어떤 메시지를 수신하고 처리할 수 있느냐가 객체의 책임을 결정한다.
- 메시지가 결정된 후에야 메시지를 수신할 후보를 선택하는 것으로 초점이 이동한다.

## 인터페이스와 구현의 분리

### 객체 관점에서 생각하는 방법

- 좀 더 추상적인 인터페이스
- 최소 인터페이스
- 인터페스와 구현 간에 차이가 있다는 점을 인식

### 객체 설계의 핵심은 객체를 두 개의 분리된 요소로 분할 해 설계하는 것이다. 그것은 바로 외부에 공개되는 인터페이스(위험지대)와 내부에 감춰지는 구현(안전지대)이다.

---

## 데미테르 법칙

- 메시지를 먼저 결정하고 객체가 메시지를 따르게 하는 설계 방식은 객체가 외부에 제공하는 인터페이스가 독특한 스타일을 따르게 한다. 이 스타일이 바로 데메테르 법칙이다.
- 책임-주도 설계는 객체가 아니라 객체들이 주고받는 메시지에 초점을 맞추게 함으로써 객체지향의 장점을 극대화한다.
- 메시지 중심 설계는 메시지 수신자의 캡슐화를 증진시킨다.
- 송신자가 수신자의 내부 상태를 미리 알 수 없기 때문에 송신자와 수신자가 느슨하게 결합된다.
- 꼬치꼬치 캐물을 수 없다.
- 묻지말고 시켜라
- 객체지향 애플리케이션이 자율적인 객체들의 공동체라는 사실 강조
- 객체의 자율성 보장
- 고민을 연기하라. 단지 필요한 메시지를 전송하기만 하고 메시지를 수신하는 객체가 스스로 메시지의 처리 방법을 결정하게 하라
- 데메테르 법칙은 객체를 자율적으로 만들고 캡슐화를 보장하며 결합도를 낮게 유지시켜 주기 때문에 설계를 유연하게 만든다.
- 메시지가 어떻게 해야하는지를 지시하지 말고 무엇을 해야하는지를 요청하는 것
- 객체가 자신이 수신할 메시지를 결정하게 하지 말고 메시지가 협력에 필요한 객체를 발견하게 해야 한다.
